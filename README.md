# pxy-redirect-ow-function

This is an experimental serverless implementation of the [pxy-redirect service](https://github.com/jonasbn/pxy-redirect).

It's goal is to take a short URL following a required format and redirect to the designated URL.

The scheme is:

```text
<domain>/<version>/<fragment>
```

Redirects to:

```text
https://<domain>/<version>/tools/clang/docs/DiagnosticsReference.html#<fragment>
```

Example:

```text
https://faas-ams3-2a2df116.doserverless.co/api/v1/web/fn-a7240b26-c6c7-46df-808a-71fac192afd8/pxy/redirect/5/rsanitize-address
```

Redirects to:

```text
https://releases.llvm.org/5.0.0/tools/clang/docs/DiagnosticsReference.html#rsanitize-address
```

Do note the version number is expanded.

This scheme is used by [clang diagnostic flags matrix generator](https://github.com/jonasbn/clang-diagnostic-flags-matrix), but by the service, since I have not found a way to shorted the function URL.

The service offers:

```text
https://pxy.fi/5/rsanitize-address
```

Compared to the function which offers:

```text
https://faas-ams3-2a2df116.doserverless.co/api/v1/web/fn-a7240b26-c6c7-46df-808a-71fac192afd8/pxy/redirect/5/rsanitize-address
```

And since I need short URLs for my Markdown (`[X](https://<domain>/<version>/<fragment>)`) generated by the [clang diagnostic flags matrix generator](https://github.com/jonasbn/clang-diagnostic-flags-matrix), this does not really work for me.

Please see my [blog post](https://dev.to/jonasbn/challenges-solutions-and-more-challenges-and-more-solutions-4j3f) for the long version.
